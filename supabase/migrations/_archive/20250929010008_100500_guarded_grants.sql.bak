do $$
begin
  -- Always grant on tables we know exist now:
  execute 'grant select on public.fish to anon, authenticated';
  execute 'grant select on public.transgenes to anon, authenticated';
  execute 'grant select on public.fish_transgene_alleles to anon, authenticated';
  execute 'grant select on public.treatments to anon, authenticated';
  execute 'grant select on public.fish_treatments to anon, authenticated';
  execute 'grant select on public.tank_assignments to anon, authenticated';

  -- Conditionally grant if the relation exists (view or table)
  if to_regclass('public.transgene_allele_catalog') is not null then
    execute 'grant select on public.transgene_allele_catalog to anon, authenticated';
  end if;
end$$;
